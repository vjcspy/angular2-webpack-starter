<div class="cart-table" [ngStyle]="checkoutState.cartItemsStyle" *ngIf="!checkoutState.inSearchCustomers && quoteState.info.isShiftOpening">
  <div class="customer-row" *ngIf="!!quoteState.customer && !!quoteState.customer['id']">
    <div class="customer-head">
      <span class="icon-user click"></span>
      <span class="delete-btn"><span class="icon-close"></span></span>
      <div class="c-name">
        <span class="c-user">{{quoteState.customer['first_name'] +" "+ quoteState.customer['last_name']}}</span>
        <span class="c-mail">{{quoteState.customer['email']}}</span>
      </div>
    </div>
  </div>

  <!--<div *ngIf="posRefund.isRefunding">-->
  <!--<pos-refund-item *ngFor="let item of posRefund.creditmemo['items']" [item]="item"></pos-refund-item>-->
  <!--</div>-->

  <div *ngFor="let item of quoteState.quote.getAllVisibleItems(); let i = index;trackBy: trackByItemFn;" class="cart-row"
       [ngClass]="{active: i === checkoutState.cartItemRowSelected}"
       (click)="toggleItemInCart($event,i)">
    <div class="cart-head">
      <div class="c-num"
           *ngIf="item.getProduct()['stock_items'] && item.getProduct()['stock_items']['is_qty_decimal'] == '1' && !numberHelper.isInteger(item.getQty())">
        {{item.getQty() | number : '1.2-2'}}
      </div>
      <div class="c-num"
           *ngIf="!item.getProduct()['stock_items'] || item.getProduct()['stock_items']['is_qty_decimal'] != '1' || numberHelper.isInteger(item.getQty())">
        {{item.getQty()}}
      </div>
      <div class="c-price">
        <span class="regular-pr">
          {{(configState.setting.tax.displayCartPricesExclTax() ? item.getData('row_total') : item.getData('row_total_incl_tax'))| priceFormat}}
          <span class="tooltiptext-left">
            {{!configState.setting.tax.displayCartPricesExclTax() ? "Excl.tax: " + (item.getData('row_total')| priceFormat) : "Incl.tax: " +(item.getData('row_total_incl_tax')| priceFormat)}}
          </span>
        </span>
        <span class="old-pr"
              *ngIf="!item.getData('buy_request')['custom_sale'] && (item.getData('posIsSales') || item.hasData('original_custom_price'))">
                        {{(item.getOriginalPrice() * item.getQty()) | priceFormat}}
                    </span>
      </div>
      <span class="delete-btn"><span class="icon-close"></span></span>
      <div class="c-name" *ngIf="!item.getData('buy_request')['custom_sale']">
        <h3 class="product-name">{{item.getProduct().getData('name')}}</h3>
        <p class="p-product-name">{{getSKU(item)}}</p>
      </div>
      <div class="c-name" *ngIf="item.getData('buy_request')['custom_sale']">
        <h3 class="product-name">{{item.getData('buy_request')['custom_sale']['name']}}</h3>
      </div>
    </div>
    <div class="cart-content">
      <div class="inner">
        <ul class="fr-control">
          <li>
            <label>{{ 'Quantity' | translate }}</label>
            <input inputSelectText value="{{item.getQty() | number : '1.2-2'}}"
                   (keyup)="updateItemBuyRequest($event,item,'qty')"
                   type="text">
          </li>
          <li>
            <label>{{ 'Price' | translate }}</label>
            <input [disabled]="item.isChildrenCalculated()" inputSelectText
                   value="{{(item.getData('is_price_incl_tax') ? item.getData('price_incl_tax'): item.getCalculationPriceOriginal())| number : '1.2-2'}}"
                   (keyup)="updateItemBuyRequest($event,item,'custom_price')"
                   type="text">
          </li>
          <li>
            <label>{{ 'Split' | translate }}</label>
            <input [disabled]="item.getProduct().getTypeId() == 'configurable' || item.getProduct().getTypeId() == 'bundle'"
                   inputSelectText
                   (keyup)="updateItemBuyRequest($event,item,'split_item')"
                   type="text">
          </li>
          <li>
            <label>
              {{ 'Discount' | translate }}
              <span class="click"
                    [ngClass]="{currency: !item.getData('buy_request').getData('is_discount_value')}">%</span>
              |
              <span class="click"
                    [ngClass]="{currency: item.getData('buy_request').getData('is_discount_value')}">$</span>
            </label>
            <input inputSelectText
                   value="{{(item.getData('buy_request').getData('is_discount_value')? (item.getData('buy_request').getData('discount_per_item') || 0) : (item.getData('buy_request').getData('retail_discount_per_items_percent')|| 0))  |  number : '1.2-2'}}"
                   (keyup)="updateItemBuyRequest($event,item,'discount_per_item')"
                   type="text">
          </li>
        </ul>
      </div>
      <p *ngIf="!item.getData('buy_request')['custom_sale']" class="c-bot"><span class="click">{{ 'Product Information' | translate }}</span>
      </p>
    </div>
  </div>
</div>
